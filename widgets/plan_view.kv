#:import calendar calendar
#:import date datetime.date
#:import settings settings

<PlanView>:
    layout: layout
    rows: rows
    orientation: "vertical"

    ScrollView:
        BoxLayout:
            id: layout
            orientation: "vertical"
            size_hint: None, None

            BoxLayout:
                id: subjects
                size_hint: None, None
                height: 80
                on_children: self.parent.width = sum(c.width for c in self.children)

                Widget:
                    size_hint_x: None
                    width: 250

                Button:
                    size_hint_x: None
                    width: 80
                    text: "+"
                    on_press: root.subjects.append('')

            BoxLayout:
                id: rows
                orientation: "vertical"
                on_children: self.parent.height = sum(c.height for c in self.children) + subjects.height

    Button:
        size_hint_y: None
        height: 80
        text: "Save"
        on_press: root.update_data()


<MonthRow>:
    add: add
    size_hint_y: None
    height: 400

    Label:
        size_hint_x: None
        width: 200
        text: calendar.month_name[int(root.month.split('-')[1])]

    Button:
        id: add
        size_hint_x: None
        width: 50
        text: "+"


<RangeRow>:
    size_hint_y: None
    height: 400

    Label:
        size_hint_x: None
        width: 250
        text: '\n'.join((date.fromisoformat(root.start).strftime(settings.date_format), date.fromisoformat(root.end).strftime(settings.date_format)))


<SubjectDesc>:
    size_hint_x: None
    width: 400
